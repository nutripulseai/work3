<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beautiful Header</title>
    <link rel="stylesheet" href="/home/home.css">
    <script defer src="/home/home.js"></script>
</head>
<body>
    
  <header>
    <div class="logo">
        <img src="/imega/logo ai white.svg" alt="Logo Image">
    </div>
    <div class="menu-icon" id="menu-icon">
        <div class="bar bar1"></div>
        <div class="bar bar2"></div>
        <div class="bar bar3"></div>
    </div>
    <nav id="nav-menu">
        <ul>
            <li><a href="/home.html">Home</a></li>
            <li><a href="moreinformation1.html">About</a></li>
            <li><a href="/homeworkout/work.html">Home Workout</a></li>
            <li><a href="/contactus/ContactUs.html">Contact Us</a></li>
            <li><a href="#bmr">BMR</a></li>
            <li><a href="/ai-fitness-app/public/index.html">GPT AI Fitness</a></li>
            <li><a href="#diary">Diary</a></li>
            <li><a href="/testclick/testclick.html">Calorie</a></li>
            <li><a href="/auth/google">Login with Google</a></li>
            <li><a href="/profile" id="settings-button">Settings</a></li>
        </ul>
    </nav>
    <!-- Login/Register buttons, hidden when logged in -->
    <div class="auth-buttons" id="auth-buttons">
        <a href="/login" class="btn">Login</a>
        <a href="/register" class="btn">Register</a>
    </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
      const userLoggedIn = false; // Replace with actual user check logic (e.g., session check)
      
      if (userLoggedIn) {
          document.getElementById('auth-buttons').style.display = 'none';
      }
  });
</script>

    
     
    <div class="banner">
        <img src="/imega/home banerr.svg" alt="Large Screen Banner" class="banner-image large-screen">
        <img src="/imega/עיצוב ללא שם (33).svg" class="banner-image small-screen">
    </div>
    <main>
     
        <section class="beautiful-section">
            <div class="text-container">
                <h2>Welcome to Our Service</h2>
                <p>Experience the best personal training and nutrition plans tailored just for you. Join us to start your fitness journey!</p>
            </div>
            <button class="cta-button">Get Started</button>
        </section>

        <section class="beautiful-squares">
            <div class="container">
                <div class="square">
                    <img src="/imega/www.reallygreatsite.com.svg" alt="Vehicle 1">
                    <div class="seam"></div>
                   <a href="morinformation1.html"> <button class="info-btn">More Information</button></a>
                </div>
                <div class="square">
                    <img src="/imega/תוזנה תמונה ai.svg" alt="Vehicle 2">
                    <div class="seam"></div>
                    <a href="morinformation2.html"><button class="info-btn">More Information</button></a>
                </div>
                <div class="square">
                    <img src="/imega/כושר מותאם אישית.svg" alt="Vehicle 3">
                    <div class="seam"></div>
                    <a href="morinformation3.html"><button class="info-btn">More Information</button></a>
                </div>
            </div>
        </section>


      




        
        <div id="subscription-plan">
            <div class="plan">
                <img src="/imega/doworkoutnow mix.svg" alt="Plan" class="plan-image">
                <button class="choose-plan-btn">Choose Plan</button>
            </div>
        </div>
    
        <!-- PayPal Button Container (hidden by default) -->
        <div id="paypal-button-container" style="display: none;"></div>
    
        <!-- Include the PayPal SDK script -->
        <script src="https://www.paypal.com/sdk/js?client-id=AX0-tb06-_QlFKuULjmPwcT3y6HN9qeDBE8tEQWRQYDzoS0xtruK_O72SNEgDWzUr8nT8UcaySge3sZB&vault=true&intent=subscription"></script>
    
        <!-- Include the custom JavaScript code -->
        <script>
            let isButtonRendered = false; // Flag to check if button is already rendered
          
            // Event listener for plan selection
            document.querySelector('.choose-plan-btn').addEventListener('click', function() {
              if (!isButtonRendered) {
                renderPayPalButton();
                isButtonRendered = true; // Set flag to true after rendering
              }
            });
          
            // Render PayPal button
            function renderPayPalButton() {
              const container = document.getElementById('paypal-button-container');
              container.style.display = 'block';
          
              // Clear previous PayPal button instances if any
              container.innerHTML = '';
          
              paypal.Buttons({
                style: {
                  shape: 'rect',
                  color: 'silver',
                  layout: 'vertical',
                  label: 'subscribe'
                },
                createSubscription: function(data, actions) {
                  // Replace with your actual PayPal subscription plan ID
                  const planId = 'P-4XP21886MK8068321M3HRN7A'; // Replace with your actual plan ID
          
                  return actions.subscription.create({
                    plan_id: planId
                  });
                },
                onApprove: function(data, actions) {
                  // Notify user of successful subscription
                  alert('Subscription successful! Subscription ID: ' + data.subscriptionID);
          
                  // Retrieve user email dynamically (update this with your actual method)
                  const userEmail = 'user@example.com'; // Replace with actual method to get user's email
          
                  // Send subscription details to the server
                  fetch('/update-subscription', {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                      email: userEmail,
                      subscriptionDetails: {
                        subscriptionID: data.subscriptionID
                      }
                    })
                  })
                  .then(response => response.text())
                  .then(result => {
                    console.log('Server response:', result);
                  })
                  .catch(error => {
                    console.error('Error:', error);
                    alert('Subscription could not be processed. Please try again.');
                  });
                }
              }).render('#paypal-button-container'); // Renders the PayPal button
            }
          </script>
        
        
        
        <script src="home.js"></script>
</body>
</html>
